//   <div style="transition: z-index 280ms ease 280ms; z-index: 0; opacity: 0.5;">
//    <div class="fbefu8h leftPlayer notZone" data-qa="playerTag" style="transition: height 280ms ease 0s, min-width 280ms ease 0s, border-radius 280ms ease 280ms, bottom 280ms ease 0s;">
//       <div class="f11rr7sf isNotMyPlayer">
//          <div class="fc6eh8u"><span class="fuj0xr0"><span class="fx8caj3">1</span></span></div>
//          <span class="f1n1diy1 balanceLargeSize" data-qa="playerBalance" style="transition: padding-right 280ms ease 0s;">396</span>
//       </div>
//       <div class="f1qjlmsw" style="opacity: 0; visibility: hidden; transition: opacity 133.333ms ease 0s, visibility 133.333ms ease 133.333ms;">
//          <div class="f1cb135w"><i class="icon-component icon-close2" style="color: rgb(255, 255, 255);"></i></div>
//          <button class="f17aq3f2 fmi6081 f1dfgz58 Desktop landscape f1vxdo2v" data-qa="button" style="font-size: 10px;">Sit here</button>
//          <div class="f68g4u1">
//             <textarea class="f10zqg8f" placeholder="Enter note"></textarea>
//             <div class="fq2pa6k">
//                <div class="f1hykqr2">
//                   <svg width="20" height="20" viewBox="0 0 20 20" class="f1e8lhs7">
//                      <g id="icon-text-active" transform="translate(-47 -3961)">
//                         <g id="Group_28831" data-name="Group 28831" transform="translate(16307 23218)">
//                            <path id="Path_1229" data-name="Path 1229" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" transform="translate(-16258 -19255)" fill="#fff"></path>
//                         </g>
//                         <g id="Dot-Icon" transform="translate(47 3961)">
//                            <path id="bg-circle" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" transform="translate(2 2)" fill="#fff"></path>
//                            <g id="pen" transform="translate(6 5.946)" opacity="0.9">
//                               <g id="Group_28871" data-name="Group 28871" transform="translate(0 0.054)">
//                                  <g id="Group_28869" data-name="Group 28869" transform="translate(0.882 0)">
//                                     <path id="Path_22167" data-name="Path 22167" d="M0,0H1.212V2.344H0Z" transform="translate(4.603 0.857) rotate(-45)"></path>
//                                     <path id="Path_22168" data-name="Path 22168" d="M57.1,318.029l-.626,2.149,2.149-.626Z" transform="translate(-56.471 -313.061)"></path>
//                                     <path id="Path_22169" data-name="Path 22169" d="M0,0H4.783V2.344H0Z" transform="translate(0.89 4.569) rotate(-45)"></path>
//                                  </g>
//                                  <g id="Group_28870" data-name="Group 28870" transform="translate(0 7.53)">
//                                     <path id="Path_22170" data-name="Path 22170" d="M0,482H8v.469H0Z" transform="translate(0 -481.998)"></path>
//                                  </g>
//                               </g>
//                            </g>
//                            <g id="Group_28789" data-name="Group 28789" transform="translate(16412 19323)">
//                               <g id="Path_1229-2" data-name="Path 1229" transform="translate(-16412 -19323)" fill="none">
//                                  <path d="M10,0A10,10,0,1,1,0,10,10,10,0,0,1,10,0Z" stroke="none"></path>
//                                  <path d="M 10 1 C 5.037380218505859 1 1 5.037380218505859 1 10 C 1 14.96261978149414 5.037380218505859 19 10 19 C 14.96261978149414 19 19 14.96261978149414 19 10 C 19 5.037380218505859 14.96261978149414 1 10 1 M 10 0 C 15.52285003662109 0 20 4.477149963378906 20 10 C 20 15.52285003662109 15.52285003662109 20 10 20 C 4.477149963378906 20 0 15.52285003662109 0 10 C 0 4.477149963378906 4.477149963378906 0 10 0 Z" stroke="none" fill="#fff"></path>
//                               </g>
//                            </g>
//                         </g>
//                      </g>
//                   </svg>
//                </div>
//                <div class="f1hykqr2">
//                   <svg id="icon-shark" width="16" height="16" viewBox="0 0 16 16" class="f1pvk8rm">
//                      <path id="bg-circle" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" fill="#eb4d3d"></path>
//                      <g id="shark" transform="translate(-15.785 3)" opacity="0.75">
//                         <path id="Path_22222" data-name="Path 22222" d="M20.774,7.392a1.142,1.142,0,0,0,.66-.267,2.074,2.074,0,0,1,2.591-.005,1.227,1.227,0,0,0,1.587,0,2.065,2.065,0,0,1,1.309-.456C26.016,3.36,23.418,1,20.4,1A13.286,13.286,0,0,1,20.774,7.392Z" fill="#fff"></path>
//                         <path id="Path_22223" data-name="Path 22223" d="M28.212,7.859a2.076,2.076,0,0,0-2.6,0,1.229,1.229,0,0,1-1.587,0,2.074,2.074,0,0,0-2.591,0,1.155,1.155,0,0,1-.767.287h-.036a1.169,1.169,0,0,1-.771-.29,2,2,0,0,0-1.074-.441v.853a1.151,1.151,0,0,1,.573.254,1.982,1.982,0,0,0,1.265.458.451.451,0,0,0,.052,0,2.017,2.017,0,0,0,1.273-.456,1.224,1.224,0,0,1,1.587,0,2.084,2.084,0,0,0,2.6,0,1.222,1.222,0,0,1,1.588,0,2,2,0,0,0,1.064.437V8.11A1.154,1.154,0,0,1,28.212,7.859Z" transform="translate(0 0.016)" fill="#fff"></path>
//                      </g>
//                   </svg>
//                </div>
//                <div class="f1hykqr2">
//                   <svg id="icon-maniac" width="16" height="16" viewBox="0 0 16 16" class="f1pvk8rm">
//                      <path id="bg-circle" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" fill="#f0b037"></path>
//                      <path id="fire" d="M595.438,200.83a4.482,4.482,0,0,1-1.473,3.581.7.7,0,0,0,.129-.166,5.115,5.115,0,0,0,.311-3c-.247-2.633-3.1-3.744-3.1-3.744.249,1.6-.492,1.975-2.22,5.021s1.58,4.979,1.58,4.979c-1.33-3.663,1.48-5,1.48-5a5.053,5.053,0,0,0,1.132,3.477,7.472,7.472,0,0,0,1.421-.7,10.888,10.888,0,0,1-.492,2.223,5.978,5.978,0,0,0,2.266-2.964C597.012,202.687,595.438,200.83,595.438,200.83Z" transform="translate(-584.584 -194.501)" fill="#fff" opacity="0.75"></path>
//                   </svg>
//                </div>
//                <div class="f1hykqr2">
//                   <svg id="icon-fish" width="16" height="16" viewBox="0 0 16 16" class="f1pvk8rm">
//                      <path id="bg-circle" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" fill="#5dc466"></path>
//                      <g id="fish" transform="translate(2.999 -33.45)" opacity="0.75">
//                         <g id="Group_28865" data-name="Group 28865" transform="translate(0.001 37.45)">
//                            <path id="Path_22164" data-name="Path 22164" d="M6.378,38.868a4.357,4.357,0,0,0-1.53-1.418,5.369,5.369,0,0,0-.753,1.894,10.9,10.9,0,0,0-2.046,1.617,2.631,2.631,0,0,0-2.035-.93,2.354,2.354,0,0,0,.515,1.7,2.354,2.354,0,0,0-.515,1.7,2.631,2.631,0,0,0,2.035-.93,7.289,7.289,0,0,0,2.408,1.745,4.895,4.895,0,0,0,0,1.208A2.806,2.806,0,0,0,6.053,44.6,4.2,4.2,0,0,0,10,41.729,4.243,4.243,0,0,0,6.378,38.868Zm1.339,2.283a.347.347,0,1,1,.349-.347A.348.348,0,0,1,7.717,41.151Z" transform="translate(-0.001 -37.45)" fill="#fff"></path>
//                         </g>
//                      </g>
//                   </svg>
//                </div>
//                <div class="f1hykqr2">
//                   <svg id="icon-rock" x="0px" y="0px" viewBox="0 0 16 16" xml:space="preserve" class="f1pvk8rm">
//                      <style type="text/css">
//                         .st0{fill:#3478F6;}
//                         .st1{opacity:0.75;}
//                         .st2{fill:#FFFFFF;}
//                      </style>
//                      <path id="bg-circle" class="st0" d="M8,0c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S3.6,0,8,0z"></path>
//                      <g id="rock">
//                         <g id="rock-icon" transform="translate(3 3)" class="st1">
//                            <path id="rock-3" class="st2" d="M5.1,4.7l1.2-1.1l3.3,3.2L6.9,1.5H6L5.2,0L3.4,3.3L5.1,4.7z"></path>
//                            <path id="rock-2" class="st2" d="M2.4,3.5L0,8h5.9l-1-2.6L2.4,3.5z"></path>
//                            <path id="rock-1" class="st2" d="M6.3,4.5L5.5,5.2l1,2.8H10L6.3,4.5z"></path>
//                         </g>
//                      </g>
//                   </svg>
//                </div>
//                <div class="f1hykqr2">
//                   <svg id="icon-slow" width="16" height="16" viewBox="0 0 16 16" class="f1pvk8rm">
//                      <path id="bg-circle" d="M8,0A8,8,0,1,1,0,8,8,8,0,0,1,8,0Z" fill="#b67ad5"></path>
//                      <path id="rat" d="M9.122,82H5.587a1.577,1.577,0,0,0-1.465,1.667.3.3,0,1,0,.586,0,.946.946,0,0,1,.879-1H9.122a1.008,1.008,0,0,0,0-2H8.829V80.1A3.9,3.9,0,0,0,5.2,76a3.379,3.379,0,0,0-2.551,1.2l-.049.056a1.4,1.4,0,0,0-1.117-.591A.315.315,0,0,0,1.192,77v1.9L.05,80.814a.373.373,0,0,0-.015.342.29.29,0,0,0,.258.176H4.122V81a2.208,2.208,0,0,1,2.051-2.333.336.336,0,0,1,0,.667A1.577,1.577,0,0,0,4.708,81v.333H9.122a.336.336,0,0,1,0,.667ZM2.071,80a.336.336,0,0,1,0-.667.336.336,0,0,1,0,.667Z" transform="translate(2.999 -71.999)" fill="#fff" opacity="0.75"></path>
//                   </svg>
//                </div>
//             </div>
//          </div>
//       </div>
//       <div class="badgeHoverClass fj6hvda"><i class="icon-more"></i></div>
//    </div>
//    {/* IF FOLDED: */}
//    <div class="f1xuecgj Desktop landscape leftPlayer notZone" style="opacity: 0; max-height: 0px; transition: opacity 280ms ease 300ms, max-height 280ms ease 900ms, min-width 280ms ease, height 280ms ease;">
//       <div class="f1qbx4ty Desktop landscape" style="opacity: 0; transition: opacity 600ms ease 0s;">
//          <div class="ffnz569 Desktop">FOLD</div>
//       </div>
//       <div class="f1qbx4ty Desktop f1cwv3sl" style="opacity: 1; transition: opacity 600ms ease 0s;">
//          <div class="ffnz569 Desktop">FOLD</div>
//       </div>
//    </div>
//    {/* IF SITTING OUT: */}
//    <div class="fl7wcok Desktop landscape leftPlayer notZone myPlayer" style="opacity: 1; max-height: 36px; transition: opacity 280ms ease 0ms, max-height 280ms ease 0ms, min-width 280ms ease, height 280ms ease;">
//         <div class="f1qbx4ty Desktop landscape" style="opacity: 0; transition: opacity 600ms ease 0s;">
//             <div class="ffnz569 Desktop">SITTING OUT</div>
//         </div>
//         <div class="f1qbx4ty Desktop f1cwv3sl" style="opacity: 1; transition: opacity 600ms ease 0s;">
//             <div class="ffnz569 Desktop">SITTING OUT</div>
//         </div>
//     </div>
// IF ALL IN:
//   <div class="f1xuecgj Desktop landscape leftPlayer notZone" style="opacity: 0; max-height: 0px; transition: opacity 280ms ease 300ms, max-height 280ms ease 900ms, min-width 280ms ease, height 280ms ease;">
//    <div class="f1qbx4ty Desktop landscape" style="opacity: 0; transition: opacity 600ms ease 0s;">
//       <div class="ffnz569 Desktop">ALL-IN</div>
//    </div>
//    <div class="f1qbx4ty Desktop f1cwv3sl" style="opacity: 1; transition: opacity 600ms ease 0s;">
//       <div class="ffnz569 Desktop">ALL-IN</div>
//    </div>
// </div>
// </div>

class Player {
  constructor(dom, seatNumber, tableSlotNumber) {
    this.dom = dom;
    this.seatNumber = seatNumber;
    this.tableSlotNumber = tableSlotNumber;
    this.holeCards = [];
    this.init();
  }

  init() {
    this.syncPlayerInfo();
  }

  getBalance() {
    const previousBalance = this.balance;

    // To get the player balance:
    // 1. Get the innerText of the <span> tag with attribute "data-qa" with value "playerBalance"
    // 2. Parse the balance text to a number and store it in a new Player instance
    // Note: These values are formatted in the "x,xxx.xx" format (e.g."2,224.37"), but whenever the value has no decimal places, the format is "x,xxx" (e.g. "1,963")
    const balanceText = this.dom.querySelector(
      'span[data-qa="playerBalance"]'
    )?.innerText;
    const balance = parseFloat(balanceText.replace(/,/g, ""));
    this.balance = balance;

    // Log the balance if it has changed
    if (previousBalance !== this.balance)
      logMessage(
        `(Table #${this.tableSlotNumber}, Seat #${
          this.seatNumber
        }) New balance: $${this.balance}${
          previousBalance !== undefined
            ? ` (net: $${roundFloat(
                this.balance - previousBalance
              )}, previous: $${previousBalance})`
            : ""
        }`,
        { color: "lightgray" }
      );

    return this.balance;
  }

  getHoleCards() {
    // To get hole cards DOM:
    // 1. Get all <div> tags with attribute "data-qa" with value of "holeCards"
    // 2. Now, for each of the <div> tags we got in step 1, get all <svg> tags that has an attribute of "data-qa" with a value that starts with "card"
    const holeCardsDOM = Array.from(
      Array.from(
        this.dom.querySelectorAll('div[data-qa="holeCards"]') || []
      ).map((div) => div.querySelectorAll('svg[data-qa^="card"]')) || []
    )
      .map((innerNodeList) => Array.from(innerNodeList))
      .flat();
    this.holeCardsDOM = holeCardsDOM;

    // To get hole cards:
    // 1. Get the "data-qa" attribute value of each <svg> tag
    // 2. Filter out all empty/placeholder cards (this is when the <svg> tag's "data-qa" attribute value equals "card-1")
    // 3. Remove all duplicate cards (by removing all duplicate "data-qa" attribute values from the <svg> tags)
    const newHoleCards = holeCardsDOM
      .map((svg) => svg.getAttribute("data-qa"))
      .filter((card) => card !== "card-1")
      .filter((card, index, cards) => cards.indexOf(card) === index)
      .map((card) => formatCard(card))
      .filter((card) => card !== null);

    // Update the hole cards if they have changed
    if (JSON.stringify(newHoleCards) !== JSON.stringify(this.holeCards)) {
      this.holeCards = newHoleCards;
      if (this.holeCards.length === 0)
        logMessage(
          `(Table #${this.tableSlotNumber}, Seat #${this.seatNumber}): The player's hole cards have been cleared.`,
          {
            color: "lightblue",
          }
        );
      else
        logMessage(
          `(Table #${this.tableSlotNumber}, Seat #${
            this.seatNumber
          }): Hole cards: ${this.holeCards
            .map((card) => `[${card}]`)
            .join(" ")}`,
          { color: "lightblue" }
        );
    }

    return this.holeCards;
  }

  syncPlayerInfo() {
    function getPlayerInfo(self) {
      self.getBalance();
      self.getHoleCards();
    }
    getPlayerInfo(this);
    setInterval(() => getPlayerInfo(this), 100);
  }
}

class PokerTable {
  constructor(iframe, slotNumber) {
    this.iframe = iframe;
    this.slotNumber = slotNumber;
    this.board = [];
    this.players = new Map();
    this.init();
  }

  init() {
    this.doc = this.iframe.contentWindow?.document;
    this.syncTableInfo();
  }

  getBoard() {
    // To get the board DOM:
    // 1. Get the first <img> with src starting with "./static/media/bkg-table-"
    // 2. Get the parent <div> of that <img>
    // 3. Get the first <svg> tag within that <div> and all of its children that has an attribute of "data-qa" with a value that starts with "card" and does not equal "card-placeholder"
    // 4. Get the 4th-level parent <div> of that <svg>, that's the board DOM
    this.boardDOM = Array.from(
      this.doc
        ?.querySelector('img[src^="./static/media/bkg-table-"]')
        ?.parentNode?.querySelectorAll('svg[data-qa^="card"]') || []
    ).filter(
      (node) => node.getAttribute("data-qa") !== "card-placeholder"
    )[0]?.parentNode?.parentNode?.parentNode?.parentNode;

    // To get the board:
    // 1. Get all <svg> tags within the board DOM that has an attribute of "data-qa" with a value that starts with "card"
    // 2. Get the "data-qa" attribute value of each <svg> tag
    // 3. Filter out all empty/placeholder cards (this is when the <svg> tag's "data-qa" attribute value equals "card-1")
    // 4. Remove all duplicate cards (by removing all duplicate "data-qa" attribute values from the <svg> tags)
    const newBoard = Array.from(
      this.boardDOM?.querySelectorAll('svg[data-qa^="card"]') || []
    )
      .map((svg) => svg.getAttribute("data-qa"))
      // Filter out empty/placeholder cards
      .filter((card) => card !== "card-1")
      // Remove duplicate cards
      .filter((card, index, cards) => cards.indexOf(card) === index)
      .map((card) => formatCard(card))
      .filter((card) => card !== null);

    // Update the board if it has changed
    if (JSON.stringify(newBoard) !== JSON.stringify(this.board)) {
      this.board = newBoard;
      if (this.board.length === 0)
        logMessage(`(Table #${this.slotNumber}): The board has been cleared.`, {
          color: "lightblue",
        });
      else
        logMessage(
          `(Table #${this.slotNumber}): The board has been updated. ${this.board
            .map((card) => `[${card}]`)
            .join(" ")}`,
          { color: "lightblue" }
        );
    }

    return this.board;
  }

  getPlayers() {
    const previousPlayersSize = this.players.size;

    // To get all players DOM:
    // 1. Get all <div> tags with attribute "data-qa" with a value that starts with "playerContainer-"
    const playersSeatDOMs = Array.from(
      this.doc?.querySelectorAll('div[data-qa^="playerContainer-"]') || []
    );
    this.playersSeatDOMs = playersSeatDOMs;

    // Create a new Player instance for each player
    for (const seatDOM of playersSeatDOMs) {
      const seatNumber = this.getSeatNumber(seatDOM);
      if (!this.players.has(seatNumber) && !this.isSeatVacant(seatDOM)) {
        this.players.set(
          seatNumber,
          new Player(seatDOM, seatNumber, this.slotNumber)
        );
        logMessage(
          `(Table #${this.slotNumber}): A player has joined seat #${seatNumber}.`,
          { color: "lightgray" }
        );
      }
    }

    // If a player has left, remove them from the players
    for (const seatNumber of this.players.keys()) {
      if (!this.isSeatVacant(this.players.get(seatNumber).dom)) continue;
      if (
        !playersSeatDOMs.some((div) => this.getSeatNumber(div) === seatNumber)
      ) {
        this.players.delete(seatNumber);
        logMessage(
          `(Table #${this.slotNumber}): A player has left seat #${seatNumber}.`,
          { color: "lightgray" }
        );
      }
    }

    // Log the other players if they have changed
    if (previousPlayersSize !== this.players.size) {
      logMessage(
        `(Table #${this.slotNumber}): Players: ${Array.from(
          this.players.values()
        )
          .map((player) => `(${player.seatNumber}) $${player.balance}`)
          .join(" | ")}`,
        { color: "lightblue" }
      );
    }

    return this.players;
  }

  getSeatNumber(seatDOM) {
    return parseInt(seatDOM.getAttribute("data-qa").match(/\d+/g)[0]) + 1;
  }

  isSeatVacant(seatDOM) {
    // To check if a seat is vacant:
    // 1. Check if there is a <div> with attribute "data-qa" with a value of "player-empty-seat-panel"
    return (
      seatDOM.querySelector('div[data-qa="player-empty-seat-panel"]') !== null
    );
  }

  syncTableInfo() {
    function getTableInfo(self) {
      self.getBoard();
      self.getPlayers();
    }
    getTableInfo(this);
    setInterval(() => getTableInfo(this), 100);
  }
}

// To format a card (from the "data-qa" attribute value):
// 1. Get all numbers from the string
// 2. Convert the numbers to the formatted card (e.g. "card9" is the 10 of clubs, or "10c" as we call it)
// Note: clubs are numbers in range 0-12, diamonds are 13-25, hearts are 26-38, and spades are 39-51
// ac = 0, 2c = 1, 3c = 2, 4c = 3, 5c = 4, 6c = 5, 7c = 6, 8c = 7, 9c = 8, 10c = 9, jc = 10, qc = 11, kc = 12
// ad = 13, 2d = 14, 3d = 15, 4d = 16, 5d = 17, 6d = 18, 7d = 19, 8d = 20, 9d = 21, 10d = 22, jd = 23, qd = 24, kd = 25
// ah = 26, 2h = 27, 3h = 28, 4h = 29, 5h = 30, 6h = 31, 7h = 32, 8h = 33, 9h = 34, 10h = 35, jh = 36, qh = 37, kh = 38
// as = 39, 2s = 40, 3s = 41, 4s = 42, 5s = 43, 6s = 44, 7s = 45, 8s = 46, 9s = 47, 10s = 48, js = 49, qs = 50, ks = 51
const formatCard = (unformattedCard) => {
  const number = parseInt(unformattedCard.match(/\d+/g)[0]);

  // Make sure the number is valid
  if (isNaN(number) || number > 51) return null;

  const suit = Math.floor(number / 13);
  return `${
    ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"][
      number % 13
    ]
  }${"cdhs"[suit]}`;
};

// Initialize a Map to store all poker tables
const pokerTables = new Map();

// Check for newly opened/closed poker table "slots"
function syncPokerTableSlots(iframes = getTableSlotIFrames()) {
  assignNewPokerTableSlots(iframes);
  removeClosedPokerTableSlots(iframes);
}

// Assign newly opened poker table slots
function assignNewPokerTableSlots(iframes = getTableSlotIFrames()) {
  for (const iframe of iframes) {
    const slotNumber = getMultitableSlot(iframe);
    if (slotNumber !== 0 && !pokerTables.has(slotNumber)) {
      pokerTables.set(slotNumber, new PokerTable(iframe, slotNumber));
      logMessage(`A new poker table has been detected (slot #${slotNumber}")`, {
        color: "limegreen",
      });
    }
  }
}

// Remove closed poker table slots
function removeClosedPokerTableSlots(iframes = getTableSlotIFrames()) {
  for (const slotNumber of pokerTables.keys()) {
    if (!iframes.some((iframe) => getMultitableSlot(iframe) === slotNumber)) {
      pokerTables.delete(slotNumber);
      logMessage(`A poker table has been closed (slot #${slotNumber})`, {
        color: "red",
      });
    }
  }
}

// Get all "Table slot" iframes and convert the resultant NodeList to Array (for more utility)
const getTableSlotIFrames = () =>
  Array.from(document.querySelectorAll('iframe[title="Table slot"]'));

const getMultitableSlot = (iframe) =>
  parseInt(iframe.getAttribute("data-multitableslot")) + 1;

// Exit the script
function exit() {
  clearAllIntervals();
  pokerTables.clear();
  logMessage("Now exiting PokerEye+ (Plus) for Ignition Casino...", {
    color: "crimson",
  });
}

// Main function (self-invoking)
const main = (function main() {
  syncPokerTableSlots();
  setInterval(syncPokerTableSlots, 1000);
  return main;
})();

// utils.js
// Utility function to log watermarked messages to the console
function logMessage(
  message,
  {
    color = "black",
    background = "black",
    fontSize = "1.2em",
    fontWeight = "normal",
    fontStyle = "normal",
  }
) {
  console.log(
    "%c%s",
    `color: ${color}; background: ${background}; font-size: ${fontSize}; font-weight: ${fontWeight}; font-style: ${fontStyle};`,
    `[PokerEye+]: ${message}`
  );
}

// Utility function to clear all timeouts/intervals created by the script
function clearAllIntervals() {
  // Get a reference to the last interval + 1
  const interval_id = window.setInterval(function () {},
  Number.MAX_SAFE_INTEGER);

  // Clear any timeout/interval up to that id
  for (let i = 1; i < interval_id; i++) {
    window.clearInterval(i);
  }
}

function roundFloat(number, decimalPlaces = 2) {
  return parseFloat(number.toFixed(decimalPlaces));
}
